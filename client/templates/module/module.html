<template name="module">

	{{#if sessionModuleIDMatchesParameterModuleID}}
		<h2 class="templateHeader">{{module_code}} - {{module_name}}</h2>

		<div class="btn-group btn-group-justified btn-block moduleBreakdownBtnGroup">
			<a href=# class="btn btn-default btn-student" role=button>Breakdown by Student</a>
			<a href=# class="btn btn-default btn-class" role=button>Breakdown by Class</a>
		</div>
		<!-- Split button -->
		<div class="btn-group moduleBreakdownBtnList">
			  <button type="button" class="btn btn-default dropdown-lead">Breakdown by</button>
			  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
			    <span class="caret"></span>
			    <span class="sr-only">Toggle Dropdown</span>
			  </button>
			  <ul class="dropdown-menu">
			    <li><a class="btn-student">Student</a></li>
			    <li><a class="btn-class">Class</a></li>
			  </ul>
		     <div class="clearFix"></div>
		</div>

		{{#if whatToShow "student"}}
			<div class="table-responsive studentBreakdown">
				<table class="table table-hover">
					<thead>
						<tr>
							<th>#</th>
							<th>Student Number</th>
							<th>Name</th>
							<th>%</th>
						</tr>
					</thead>

					<tbody>
						{{#each students}}
						<tr>
							<th scope="row">{{index}}</th>
							<td>{{student_number}}</td>
							<td><a href="{{pathFor 'student' _id=student_number}}">{{name}}</a></td>
							<td class={{rowClassForPercentage percentage_of_classes_attended}}>
								<div class="thingContainer">
									<div class="moduleClassAttendance">{{roundPercentage percentage_of_classes_attended}}</div>
									<a class="btn btn-primary btn-xs breakdownButton" role="button" href="{{pathFor 'student_module_detail' studentNumber=student_number moduleID=../moduleID}}">View Breakdown</a>
					    			<div class="clearFix"></div>
								</div>
				    		</td>
						</tr>
						{{/each}}
					</tbody>
				</table>
		</div>
		{{/if}}

		{{#if whatToShow "class"}}
			<div class="table-responsive studentBreakdown">
				<table class="table table-hover">
					<thead>
						<tr>
							<th>#</th>
							<th>Type</th>
							<th>Date</th>
							<th>Start Time</th>
							<th>Finish Time</th>
							<th>%</th>
						</tr>
					</thead>

					<tbody>
						{{#each classes}}
						<tr class={{rowClass percentage_of_students_attended}}>
							<th scope="row">{{index}}</th>
							<td>{{class_type}}</td>
							<td>{{formatClassDate date}}</td>
							<td>{{formatTime start_time}}</td>
							<td>{{formatTime finish_time}}</td>
							<td>{{roundPercentage percentage_of_students_attended}}</td>
						</tr>
						{{/each}}
					</tbody>
				</table>
			</div>
		{{/if}}
	{{/if}}

</template>